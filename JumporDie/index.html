<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jump or Die</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome CSS -->
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"/>
    <link rel="stylesheet" href="index.css">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Alegreya+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Bigelow+Rules&display=swap" rel="stylesheet">


   

</head>
<body>


    <audio id="musiquitapapa" src="./Assets/instrumentalindex.mp3" muted></audio>
    

    <div class="bg"></div>

    <div class="title text-center ">
        <h1>Jump or Die</h1>
    </div>

    <section class="menu" id="menu">
        <div class="container">
            <div class="row mx-auto my-auto col-lg-4">

                <div class="row">
                    <button type="button" class="btn btn-main" id="btnPlay" data-bs-toggle="modal"
                    data-bs-target="#PlayModal">Play</button>
                </div>

                <div class="row">
                    <button type="button" class="btn btn-main" id="btnHow" data-bs-toggle="modal"
                    data-bs-target="#HowModal">How to Play</button>
                </div>

                <div class="row">
                    <button type="button" class="btn btn-main" id="btnScores" data-bs-toggle="modal"
                    data-bs-target="#ScoresModal">Scores</button>
                </div>
                    
                <div class="row">
                    <button type="button" class="btn btn-main" id="btnSettings" data-bs-toggle="modal"
                    data-bs-target="#SettingsModal">Settings</button>
                </div>
                
                <div class="row">
                    <button type="button" class="btn btn-main" id="btnCredits" data-bs-toggle="modal"
                    data-bs-target="#CreditsModal">Credits</button>
                </div>

            </div>
        </div>
    </section>

    <div class="modal modal-play fade" id="PlayModal" tabindex="-1" aria-labelledby="PlayModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered ">
            <div class="modal-content">
                <div class="modal-header text-center">
                    <h1 class="modal-title" id="PlayModalLabel">Play</h1>
                </div>
                <div class="modal-body">
                    <div class="container">

                            <div class="bg"></div>
                        
                            <a href="singleplayer.html" type="button" class="btn" id="btnSingle">Single</a>

                            <a href="game.html" type="button" class="btn" id="btnMultiplayer">Multiplayer</a>

                            <button type="button" class="btn" id="btnHard" data-bs-toggle="modal"
                                data-bs-target="#OnlineModal">Hard mode</button>

                            <button type="button" class="btn close" id="btnClose"
                                data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal modal-How fade" id="HowModal" tabindex="-1" aria-labelledby="OnlineModalLabel"
    aria-hidden="true">
     <div class="modal-dialog modal-dialog-centered">
         <div class="modal-content">
             <div class="modal-header text-center">
                 <h1 class="modal-title" id="HowModalLabel">Controls</h1>
             </div>
             <div class="modal-body">
                 <div class="container">

                         <div class="bg"></div>
                         <h2>Keyboard</h2>
                         <hr>
                         <div class="row text-center">
                             <div class="col">
                                 <h2>W</h2>
                             </div>
                             <div class="col">
                                 <h2>Jump</h2>
                             </div>
                         </div>
                         <div class="row text-center">
                             <div class="col">
                                 <h2>S</h2>
                             </div>
                             <div class="col">
                                 <h2>Duck</h2>
                             </div>
                         </div>
                        

                         <br>

                         <h2>Gamepad</h2>
                         <hr>
                         <div class="row text-center">
                             <div class="col">
                                 <h2>A</h2>
                             </div>
                             <div class="col">
                                 <h2>Jump</h2>
                             </div>
                         </div>
                         <div class="row text-center">
                             <div class="col">
                                 <h2>B</h2>
                             </div>
                             <div class="col">
                                 <h2>Duck</h2>
                             </div>
                         </div>


                         <button type="button" class="btn" id="btnClose"
                         data-bs-dismiss="modal">Close</button>
                 </div>
             </div>
         </div>

     </div>
    </div>

    <div class="modal modal-scores fade" id="ScoresModal" tabindex="-1" aria-labelledby="ScoresModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header text-center">
                    <h1 class="modal-title" id="ScoresModalLabel">Leadboard</h1>
                </div>
                <div class="modal-body">
                    <table class="table text-white" >
                        <thead>
                            <tr>
                                <th scope="col">Position</th>
                                <th scope="col">Name</th>
                                <th scope="col">Score</th>
                              
                            </tr>
                        </thead>
                        <tbody class="hiscores">
                           
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer text-center">
                    <div class="row">
                        <button type="button" class="btn btn-reverse mx-auto" id="btnClose"
                            data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal modal-sound fade" id="SettingsModal" tabindex="-1" aria-labelledby="SoundModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h1 class="modal-title" id="SoundModalLabel">Settings</h1>
            </div>
            <div class="modal-body row ">
                <div class="col">
                    <h2>Sound</h2>
                </div>
                <div class="col">
                    <input type="radio" class="btn btn-outline-light check"> On</input>
                    <input type="radio" class="btn btn-outline-light check"> On</input>

        
                </div>
            </div>
            <div class="modal-body row ">
                <div class="col">
                    <h2>Brightness</h2>
                </div>
                <div class="col">
                    
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-reverse mx-auto" id="btnClose"
                    data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Jquery JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


   
        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-firestore.js"></script>
    
        
    
        <!-- TODO: Add SDKs for Firebase products that you want to use
            https://firebase.google.com/docs/web/setup#available-libraries -->
        <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-analytics.js"></script>
    
        <script>
            var firebaseConfig = {
    apiKey: "AIzaSyAt9SffQbYI2mDHh1nv6GdI5aAisYD4QL0",
    authDomain: "gcw-pf.firebaseapp.com",
    projectId: "gcw-pf",
    storageBucket: "gcw-pf.appspot.com",
    messagingSenderId: "270321268780",
    appId: "1:270321268780:web:68b32fb6bf2b9e0ffaf989",
    measurementId: "G-3TRFSPGLMN"
};
// Initialize Firebase
firebase.initializeApp(firebaseConfig);


var dbRef2 = firebase.database().ref('jugadores/').remove()
        var dbRef2 = firebase.database().ref('arr/').remove()

 var highscoresarray =[];
$(document).ready(function () {

   
    var count =1
    const fs = firebase.firestore()
    var highscoreREF = fs.collection("Scores");
    highscoreREF.orderBy("HighScore","desc").limit(5).get()
    .then((querySnapshot) => {
        querySnapshot.forEach((doc) => {
            highscoresarray.push({ username: doc.data().username, highscore : doc.data().HighScore});
            //$(".hiscores").append('<tr><th scope="row">'+count+'</th><td>'+doc.data().username+'</td><td>'+doc.data().HighScore+'</td></tr>');
            //console.log(doc.id, " => ", doc.data());
            highscoresarray.sort((a, b) => parseFloat(b.highscore) - parseFloat(a.highscore));

            highscoresarray.sort();
            count ++
        }
        
        );

    for(var i=0;i<highscoresarray.length;i++){
        $(".hiscores").append('<tr><th scope="row">'+(i+1)+'</th><td>'+highscoresarray[i]["username"]+'</td><td>'+highscoresarray[i]["highscore"]+'</td></tr>');
    }

    })
    .catch((error) => {
        console.log("Error getting documents: ", error);
    });
count = 1


//highscoresarray.sort();
/*highscoresarray.sort(function (a, b) {
  if (a.highscore > b.highscore) {
    return 1;
  }
  if (a.highscore < b.highscore) {
    return -1;
  }
  // a must be equal to b
  return 0;
});



$.each(result, function(idx, obj){ 
    $.each(obj, function(key, value){
        console.log(key + ": " + value);
    });
});
*/
//highscoresarray.sort((a, b) => parseFloat(b.highscore) - parseFloat(a.highscore));

//highscoresarray.sort();

for(var i=0;i<highscoresarray.length;i++){
 console.log(persona[i]["username"]);
}

console.log(highscoresarray)


musica = new Audio('./Assets/instrumentalindex.mp3')
musica.volume = 0.1;
musica.addEventListener('ended',function(){
    this.cunrrentTime = 0;
    this.play();
},false);
musica.play();
});



        </script>


    
</body>
</html>